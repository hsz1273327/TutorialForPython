
# æ¦‚ç‡ç»Ÿè®¡

SymPyä¹Ÿæ”¯æŒæ¦‚ç‡ç»Ÿè®¡çš„ç¬¦å·è¿ç®—.å®ƒéœ€è¦å¯¼å…¥å­æ¨¡å—`sympy.stats`


```python
from sympy import init_printing
init_printing(use_unicode=True)
```

## åˆ†å¸ƒçš„ç±»å‹


ç»Ÿè®¡æ¨¡å—å»ºç«‹åœ¨åˆ†å¸ƒä¹‹ä¸Š,SymPyæ”¯æŒçš„åˆ†å¸ƒæœ‰:

> æœ‰é™åˆ†å¸ƒ

åˆ†å¸ƒ|å¯¹åº”ç±»
---|---
å‡åŒ€åˆ†å¸ƒ|DiscreteUniform
æ­£æ€åˆ†å¸ƒ|Normal
æŒ‡æ•°åˆ†å¸ƒ|Exponential
æŠ•ç¡¬å¸æ¦‚ç‡åˆ†å¸ƒ|Coin
äºŒé¡¹åˆ†å¸ƒ|Binomial
ç­‰æ¦‚åˆ†å¸ƒ|Die
ä¼¯åŠªåˆ©åˆ†å¸ƒ|Bernoulli
è¶…å‡ ä½•åˆ†å¸ƒ|Hypergeometric
Rademacheråˆ†å¸ƒ|Rademacher


> ç¦»æ•£åˆ†å¸ƒ

åˆ†å¸ƒ|å¯¹åº”ç±»
---|---
å‡ ä½•åˆ†å¸ƒ|Geometric
æ³Šæ¾åˆ†å¸ƒ|Poisson
å¯¹æ•°åˆ†å¸ƒ|Logarithmic
è´ŸäºŒé¡¹åˆ†å¸ƒ|NegativeBinomial
Yule-Simonåˆ†å¸ƒ|YuleSimon
Zetaåˆ†å¸ƒ|Zeta

> è¿ç»­åˆ†å¸ƒ

åˆ†å¸ƒ|å¯¹åº”ç±»
---|---
åæ­£å¼¦åˆ†å¸ƒ|Arcsin
Beniniåˆ†å¸ƒ|Benini
Betaåˆ†å¸ƒ|Beta
Betaç´ æ•°åˆ†å¸ƒ|BetaPrime
Cauchyåˆ†å¸ƒ|Cauchy
å¡åˆ†å¸ƒ|Chi
å»ä¸­å¿ƒå¡åˆ†å¸ƒ|ChiNoncentral
å¡æ–¹åˆ†å¸ƒ|ChiSquared
Dagumåˆ†å¸ƒ|Dagum
Erlangåˆ†å¸ƒ|Erlang
æŒ‡æ•°åˆ†å¸ƒ|Exponential
Fåˆ†å¸ƒ|FDistribution
è´¹èˆå°”Zåˆ†å¸ƒ|FisherZ
Frechetåˆ†å¸ƒ|Frechet
Gammaåˆ†å¸ƒ|Gamma
é€†Gammaåˆ†å¸ƒ|GammaInverse
Kumaraswamyåˆ†å¸ƒ|Kumaraswamy
æ‹‰æ™®æ‹‰æ–¯åˆ†å¸ƒ|Laplace
Logisticåˆ†å¸ƒ|Logistic
å¯¹æ•°æ­£æ€åˆ†å¸ƒ|LogNormal
Maxwellåˆ†å¸ƒ|Maxwell
Nakagamiåˆ†å¸ƒ|Nakagami
æ­£æ€åˆ†å¸ƒ|Normal
Paretoåˆ†å¸ƒ|Pareto
äºŒæ¬¡Uåˆ†å¸ƒ|QuadraticU
å‡ä½™å¼¦åˆ†å¸ƒ|RaisedCosine
Rayleighåˆ†å¸ƒ|Rayleigh
Tåˆ†å¸ƒ|StudentT
ä¸‰è§’åˆ†å¸ƒ|Triangular
å‡åŒ€åˆ†å¸ƒ|Uniform
Irwin-Hallåˆ†å¸ƒ|UniformSum
VonMisesåˆ†å¸ƒ|VonMises
Weibullåˆ†å¸ƒ|Weibull
ç»´æ ¼çº³åŠåœ†åˆ†å¸ƒ|WignerSemicircle


ä½¿ç”¨è¿™äº›è¿™äº›åˆ†å¸ƒç±»å¯ä»¥å®ä¾‹åŒ–å‡ºå¯¹åº”åˆ†å¸ƒçš„éšæœºå˜é‡


```python
from sympy.stats import Die,Normal
```


```python
X, Y = Die('X', 6), Die('Y', 6) # ç­‰æ¦‚åˆ†å¸ƒ
Z = Normal('Z', 0, 1) # æ­£æ€åˆ†å¸ƒ
```


```python
X
```




$\displaystyle X$




```python
Y
```




$\displaystyle Y$




```python
Z
```




$\displaystyle Z$



### è‡ªå®šä¹‰åˆ†å¸ƒ

æœ‰é™åˆ†å¸ƒä¸­æœ‰`FiniteRV(name, density)`ç±»å¯ä»¥è‡ªå®šä¹‰æ¦‚ç‡;è¿ç»­åˆ†å¸ƒä¸­æœ‰`ContinuousRV(symbol, density, set=Interval(-oo, oo))`ç±»å¯ä»¥è‡ªå®šä¹‰éšæœºå˜é‡çš„åˆ†å¸ƒè§„åˆ™.ä»–ä»¬éƒ½éœ€è¦ä¸€ä¸ªåå­—å’Œä¸€ä¸ªåˆ†å¸ƒå¯†åº¦ä½œä¸ºå‚æ•°.


```python
from sympy.stats import FiniteRV

density = {0: .1, 1: .2, 2: .3, 3: .4}# åˆ†å¸ƒæ¦‚ç‡å¯†åº¦
X_finite = FiniteRV('X_finite', density)
X_finite
```




$\displaystyle X_{finite}$




```python
from sympy.stats import ContinuousRV
from sympy import sqrt, exp, pi,Symbol
x = Symbol("x")
X_continuous = Symbol("X_continuous")
pdf = sqrt(2)*exp(-x**2/2)/(2*sqrt(pi)) # æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°
pdf
```




$\displaystyle \frac{\sqrt{2} e^{- \frac{x^{2}}{2}}}{2 \sqrt{\pi}}$




```python
X_continuous = ContinuousRV(X_continuous, pdf)
```


```python
X_continuous
```




$\displaystyle X_{continuous}$



## æ¦‚ç‡è¿ç®—

æ¦‚ç‡ç»Ÿè®¡éƒ¨åˆ†æœ‰å¦‚ä¸‹ç‰¹æœ‰çš„è¿ç®—è¡¨è¾¾å¼å¯ä»¥ç”¨äºè®¡ç®—ä¸åŒåˆ†å¸ƒçš„éšæœºå˜é‡ç»„æˆçš„è¡¨è¾¾å¼æˆ–è€…æ¡ä»¶:

è¡¨è¾¾å¼|å«ä¹‰
---|---
`P(condition, given_condition=None, numsamples=None, evaluate=True)`|æ¡ä»¶ä¸ºçœŸçš„æ¦‚ç‡
`E(expr, condition=None, numsamples=None, evaluate=True)`|è¡¨è¾¾å¼æ»¡è¶³æ¡ä»¶çš„æœŸæœ›å€¼
`variance(expr, condition=None)`|è¡¨è¾¾å¼æ»¡è¶³æ¡ä»¶çš„æ–¹å·®
`covariance(expr_x, expr_y, condition=None)`|ä¸¤ä¸ªè¡¨è¾¾å¼æ»¡è¶³æ¡ä»¶çš„åæ–¹å·®
`std(expr, condition=None)`|è¡¨è¾¾å¼æ»¡è¶³æ¡ä»¶çš„æ ‡å‡†å·®
`density(expr, condition=None, evaluate=True, numsamples=None)`|è¡¨è¾¾å¼æ»¡è¶³æ¡ä»¶çš„æ¦‚ç‡å¯†åº¦å‡½æ•°
`given(expr, condition=None)`|è¡¨è¾¾å¼æ»¡è¶³æ¡ä»¶çš„è¯¥æ¡ä»¶æ¦‚ç‡ç©ºé—´ä¸Šçš„ç›¸åŒè¡¨è¾¾å¼
`sample(expr, condition=None)`|ä»è¡¨è¾¾å¼ç”Ÿæˆä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„æ ·æœ¬
`sample_iter(expr, condition=None, numsamples=oo)`|ä»è¡¨è¾¾å¼ç”Ÿæˆä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„æ ·æœ¬ç”Ÿæˆå™¨,é»˜è®¤æ— é™é•¿åº¦
`where(condition, given_condition=None)`|æ¡ä»¶æˆç«‹çš„å€¼åŸŸ


åŒæ—¶éšæœºå˜é‡ç»„æˆçš„è¿ç®—ä¹Ÿæ”¯æŒä½¿ç”¨æ¥å£`simplify`åŒ–ç®€


```python
from sympy.stats import P,variance,E,density,sample,where,Probability
from sympy import Eq, simplify, Integral
```


```python
P(X>3)
```




$\displaystyle \frac{1}{2}$




```python
E(X+Y)
```




$\displaystyle 7$




```python
variance(X+Y)
```




$\displaystyle \frac{35}{6}$




```python
density(X+Y)
```




$\displaystyle \left\{ 2 : \frac{1}{36}, \  3 : \frac{1}{18}, \  4 : \frac{1}{12}, \  5 : \frac{1}{9}, \  6 : \frac{5}{36}, \  7 : \frac{1}{6}, \  8 : \frac{5}{36}, \  9 : \frac{1}{9}, \  10 : \frac{1}{12}, \  11 : \frac{1}{18}, \  12 : \frac{1}{36}\right\}$




```python
sample(X+Y)
```




$\displaystyle 11$




```python
simplify(P(Z>1))
```




$\displaystyle \frac{1}{2} - \frac{\operatorname{erf}{\left(\frac{\sqrt{2}}{2} \right)}}{2}$



### `Probability`ç±»ç”¨äºå®ä¾‹åŒ–éšæœºå˜é‡æ»¡è¶³æ¡ä»¶çš„æ¦‚ç‡è¡¨è¾¾å¼.

`P`å¯ä»¥çœ‹ä½œæ˜¯`Probability`ç±»ç”¨å®ä¾‹åŒ–åæ±‚è§£ç§¯åˆ†çš„å€¼


```python
from sympy.stats import P,Probability
from sympy import Eq, simplify, Integral
```


```python
Nor = Normal("Nor", 0, 1)
```


```python
P(Nor>1) # X>3çš„æ¦‚ç‡
```




$\displaystyle \frac{\sqrt{2} \left(- \sqrt{2} \sqrt{\pi} \operatorname{erf}{\left(\frac{\sqrt{2}}{2} \right)} + \sqrt{2} \sqrt{\pi}\right)}{4 \sqrt{\pi}}$




```python
prob = Probability(Nor > 1)# X>3çš„æ¦‚ç‡è¡¨è¾¾å¼
prob
```




$\displaystyle Probability\left(Nor > 1\right)$




```python
prob.rewrite(Integral) # æ”¹å†™ä¸ºç§¯åˆ†è¡¨è¾¾å¼
```




$\displaystyle \int\limits_{1}^{\infty} \frac{\sqrt{2} e^{- \frac{z^{2}}{2}}}{2 \sqrt{\pi}}\, dz$




```python
prob.evaluate_integral() # æ±‚è§£ç§¯åˆ†
```




$\displaystyle \frac{\sqrt{2} \left(- \sqrt{2} \sqrt{\pi} \operatorname{erf}{\left(\frac{\sqrt{2}}{2} \right)} + \sqrt{2} \sqrt{\pi}\right)}{4 \sqrt{\pi}}$



### `Expectation`ç±»ç”¨äºå®ä¾‹åŒ–éšæœºå˜é‡æ»¡è¶³æ¡ä»¶çš„æœŸæœ›è¡¨è¾¾å¼.

`E`å¯ä»¥çœ‹ä½œæ˜¯`Expectation`ç±»å®ä¾‹åŒ–æœŸæœ›åæ±‚è§£ç§¯åˆ†çš„ç»“æœ


```python
from sympy.stats import Expectation, Normal, Probability
from sympy import symbols, Integral
```


```python
mu = symbols("mu", positive=True)
sigma = symbols("sigma", positive=True)
Nor_x = Normal("Nor_x", mu, sigma)
```


```python
Expectation(Nor_x)
```




$\displaystyle Expectation\left(Nor_{x}\right)$




```python
Expectation(Nor_x).evaluate_integral().simplify()
```




$\displaystyle \mu$



æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨`Probability`è¡¨è¾¾æœŸæœ›


```python
Expectation(Nor_x).rewrite(Probability)
```




$\displaystyle \int\limits_{-\infty}^{\infty} nor_{x} Probability\left(Nor_{x} = nor_{x}\right)\, dnor_{x}$



æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨`doit()`æ¥å£å°†æœŸæœ›è¡¨è¾¾å¼å±•å¼€


```python
Nor_y = Normal("Nor_y", 0, 1)
```


```python
Expectation(Nor_x+Nor_y).doit()
```




$\displaystyle Expectation\left(Nor_{x}\right) + Expectation\left(Nor_{y}\right)$



### `Variance`ç±»ç”¨äºå®ä¾‹åŒ–éšæœºå˜é‡æ»¡è¶³æ¡ä»¶çš„æ–¹å·®è¡¨è¾¾å¼

`variance`å¯ä»¥çœ‹ä½œæ˜¯Varianceç±»å®ä¾‹åŒ–æœŸæœ›åæ±‚è§£ç§¯åˆ†çš„ç»“æœ


```python
from sympy import symbols, Integral
from sympy.stats import Normal, Expectation, Variance, Probability
Variance(Nor_x)
```




$\displaystyle Variance\left(Nor_{x}\right)$




```python
Variance(Nor_x).evaluate_integral()
```




$\displaystyle \sigma^{2}$



æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨`Probability`è¡¨è¾¾æ–¹å·®


```python
Variance(Nor_x).rewrite(Probability)
```




$\displaystyle - \left(\int\limits_{-\infty}^{\infty} nor_{x} Probability\left(Nor_{x} = nor_{x}\right)\, dnor_{x}\right)^{2} + \int\limits_{-\infty}^{\infty} nor_{x}^{2} Probability\left(Nor_{x} = nor_{x}\right)\, dnor_{x}$



æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨`ğ¸ğ‘¥ğ‘ğ‘’ğ‘ğ‘¡ğ‘ğ‘¡ğ‘–ğ‘œğ‘›`è¡¨è¾¾æ–¹å·®


```python
Variance(Nor_x).rewrite(ğ¸ğ‘¥ğ‘ğ‘’ğ‘ğ‘¡ğ‘ğ‘¡ğ‘–ğ‘œğ‘›)
```




$\displaystyle - Expectation\left(Nor_{x}\right)^{2} + Expectation\left(Nor_{x}^{2}\right)$



æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨`doit()`æ¥å£å°†æ–¹å·®è¡¨è¾¾å¼å±•å¼€


```python
Variance(Nor_x+Nor_y).doit()
```




$\displaystyle 2 Covariance\left(Nor_{x}, Nor_{y}\right) + Variance\left(Nor_{x}\right) + Variance\left(Nor_{y}\right)$



### `Covariance`ç±»ç”¨äºå®ä¾‹åŒ–ä¸¤ä¸ªéšæœºå˜é‡é—´çš„åæ–¹å·®è¡¨è¾¾å¼

`covariance`å¯ä»¥çœ‹ä½œæ˜¯Covarianceç±»å®ä¾‹åŒ–æœŸæœ›åæ±‚è§£ç§¯åˆ†çš„ç»“æœ


```python
from sympy.stats import Covariance,covariance,ğ¸ğ‘¥ğ‘ğ‘’ğ‘ğ‘¡ğ‘ğ‘¡ğ‘–ğ‘œğ‘›
from sympy.stats import Normal
X = Normal("X", 3, 2)
Y = Normal("Y", 0, 1)
Z = Normal("Z", 0, 1)
W = Normal("W", 0, 1)
```


```python
cexpr = Covariance(X, Y)
cexpr
```




$\displaystyle Covariance\left(X, Y\right)$




```python
cexpr.evaluate_integral()
```




$\displaystyle 0$




```python
covariance(X,Y)
```




$\displaystyle 0$



æˆ‘ä»¬å¯ä»¥ç”¨ğ¸ğ‘¥ğ‘ğ‘’ğ‘ğ‘¡ğ‘ğ‘¡ğ‘–ğ‘œğ‘›è¡¨è¾¾åæ–¹å·®


```python
cexpr.rewrite(ğ¸ğ‘¥ğ‘ğ‘’ğ‘ğ‘¡ğ‘ğ‘¡ğ‘–ğ‘œğ‘›)
```




$\displaystyle Expectation\left(X Y\right) - Expectation\left(X\right) Expectation\left(Y\right)$



æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨`doit()`æ¥å£å°†åæ–¹å·®è¡¨è¾¾å¼å±•å¼€


```python
from sympy.abc import a, b,c,d
```


```python
cexpr.doit()
```




$\displaystyle Covariance\left(X, Y\right)$




```python
Covariance(X, X).doit()
```




$\displaystyle Variance\left(X\right)$




```python
Covariance(a*X, b*X).doit()
```




$\displaystyle a b Covariance\left(X, X\right)$




```python
Covariance(a*X + b*Y, c*Z + d*W).doit()
```




$\displaystyle a c Covariance\left(X, Z\right) + a d Covariance\left(W, X\right) + b c Covariance\left(Y, Z\right) + b d Covariance\left(W, Y\right)$



## æ¦‚ç‡ç©ºé—´

SymPyä¸­é€šå¸¸æ˜¯ç”¨æ¥éªŒè¯æŸä¸ªè¡¨è¾¾å¼æ˜¯å¦ä¸å¦ä¸€è¡¨è¾¾å¼åœ¨åŒä¸€ä¸ªæ¦‚ç‡ç©ºé—´


```python
from sympy.stats import pspace, Normal
from sympy.stats.rv import IndependentProductPSpace
```


```python
X = Normal('X', 0, 1)
pspace(2*X + 1)
```




$\displaystyle SingleContinuousPSpace\left(X, NormalDistribution\left(0, 1\right)\right)$




```python
X.pspace
```




$\displaystyle SingleContinuousPSpace\left(X, NormalDistribution\left(0, 1\right)\right)$




```python
pspace(2*X + 1) == X.pspace
```




    True


