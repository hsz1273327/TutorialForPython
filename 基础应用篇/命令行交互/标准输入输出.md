# 标准输入输出

python提供了标准输入输出的高级接口

+ `input(prompt:str='')->str`

`prompt`是提示文本


+ `print(value, ..., sep=' ', end='\n', file=sys.stdout, flush=False)`

    + `file`:  默认为标准输出,但可以指定一个文件对象用于输出
    + `sep`: 字符串插入值之间,默认为空格.
    + `end`: 字符串附加在最后一个值之后,默认换行符. 
    + `flush`: 是否强制冲洗替换流.
    
这两个接口一般也是我们从helloworld开始就接触到的东西.下面的例子展示了它的用法:


```python
%%writefile src/stdio/helloworld.py

def main():
    who = input("你是谁?")
    print(f"hello world {who}!")
    
if __name__ == "__main__":
    main()
```

    Overwriting src/stdio/helloworld.py


## 标准输入的低级接口

实际上上面这两个接口都是高级接口,是通过封装`sys`模块下的对应接口实现的.

标准输入的低级接口是`sys.stdin`,其有两个方法:

+ `sys.stdin.read()`:读取数据`ctrl+d`是结束输入.`enter`是换行.故可以接受多行输入

+ `sys.stdin.readline()`:会将标准输入全部获取,包括末尾的'\n',因此用len计算长度时是把换行符'\n'算进去了的.遇到`enter`结束,注意它是从第一个回车开始的

而`sys.stdin`本身与可读文件对象具有相同的接口.


```python
%%writefile src/stdio/helloworld_stdin.py

import sys

def main():
    print("你是谁?")
    sys.stdin.readline()
    while True:
        line = sys.stdin.readline() 
        if not line: 
            break 
        who = line.strip()
        print(f"hello world {who}!")
        
    
if __name__ == "__main__":
    main()
```

    Overwriting src/stdio/helloworld_stdin.py


## 标准输出的低级接口

标准输出的低级接口是`sys.stdout`,它是一个可写的文件对象.和它类似的是`sys.stderr`.`print`函数实际上就是调用的他们的`write`方法,并且`print`中也可以通过`file`参数来指定一个有`write`接口的可写文件对象来写入输出.


```python
%%writefile src/stdio/helloworld_stdout.py
import sys
def main():
    who = input("你是谁?")
    sys.stdout.write(f"hello world {who}!")
    
if __name__ == "__main__":
    main()
```

    Overwriting src/stdio/helloworld_stdout.py


## 更加丰富多彩的输出

只靠`print`输出显然是无法满足开发者躁动的内心需求的,Python环境下还是有不少工具可以让输出更加丰富多彩的.

可以使用第三方库[rich](https://github.com/textualize/rich/blob/master/README.cn.md)对标准输入输出进行综合美化,它包含了对原生python结构的优化,还提供了`表格`,`颜色`,`表情`,`进度条`相关的功能,同时还有`状态动画`,`树状图`,`代码语法高亮`,`markdown`等内容.如果我们仅需要单独内容,则可以单独使用接下来介绍的工具.

rich可以在jupyter中使用,使用它提供的`print`即可


```python
from rich import print as rprint
```


```python
rprint("Hello, [bold magenta]World[/bold magenta]!")
```


<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">Hello, <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">World</span>!
</pre>



但如果是在命令行中,则需要使用对象`Console`,它可以提供更加精准的输出

```python
from rich.console import Console

console = Console()
onsole.print("Hello", "World!")
```

### 美化输出python原生的数据结构

标准库就提供了[pprint](https://docs.python.org/zh-cn/3/library/pprint.html?highlight=print#module-pprint)用于对python的自带结构和满足美化输出.主要的作用包括格式化`list`,`dict`,[dataclasses.dataclass](https://docs.python.org/zh-cn/3/library/dataclasses.html#dataclasses.dataclass)和[types.SimpleNamespace](https://docs.python.org/zh-cn/3/library/types.html#types.SimpleNamespace)输出,实现自动换行,控制层级隐藏,自动缩进,每行限长,压缩长序列,防止dict排序,美化长数字展示.



```python
from pprint import pprint
user = [
    {
        'address': {'city': 'shenzhen', 'geo': {'lat': '102.54', 'lng': '30.05'}},
        'email': 'yunduojun@study.com', 
        'id': 4006118998, 
        'name': '数据研究院',
        'website': 'http://mp.weixin.qq.com/'
    }, {
        'address': {'city': 'shenzhen', 'geo': {'lat': '102.54', 'lng': '30.05'}},
        'email': 'xiaohouzi@study.com',
        'id': 1008612342, 
        'name': '机器学习研究院', 
        'website': 'http://mp.weixin.qq.com/'
    }
]
```


```python
print(user)
```

    [{'address': {'city': 'shenzhen', 'geo': {'lat': '102.54', 'lng': '30.05'}}, 'email': 'yunduojun@study.com', 'id': 4006118998, 'name': '数据研究院', 'website': 'http://mp.weixin.qq.com/'}, {'address': {'city': 'shenzhen', 'geo': {'lat': '102.54', 'lng': '30.05'}}, 'email': 'xiaohouzi@study.com', 'id': 1008612342, 'name': '机器学习研究院', 'website': 'http://mp.weixin.qq.com/'}]



```python
pprint(user)
```

    [{'address': {'city': 'shenzhen', 'geo': {'lat': '102.54', 'lng': '30.05'}},
      'email': 'yunduojun@study.com',
      'id': 4006118998,
      'name': '数据研究院',
      'website': 'http://mp.weixin.qq.com/'},
     {'address': {'city': 'shenzhen', 'geo': {'lat': '102.54', 'lng': '30.05'}},
      'email': 'xiaohouzi@study.com',
      'id': 1008612342,
      'name': '机器学习研究院',
      'website': 'http://mp.weixin.qq.com/'}]



```python
pprint(user, depth=2) # 控制层级隐藏
```

    [{'address': {...},
      'email': 'yunduojun@study.com',
      'id': 4006118998,
      'name': '数据研究院',
      'website': 'http://mp.weixin.qq.com/'},
     {'address': {...},
      'email': 'xiaohouzi@study.com',
      'id': 1008612342,
      'name': '机器学习研究院',
      'website': 'http://mp.weixin.qq.com/'}]



```python
pprint(user, depth=2, indent=4) # 控制缩进
```

    [   {   'address': {...},
            'email': 'yunduojun@study.com',
            'id': 4006118998,
            'name': '数据研究院',
            'website': 'http://mp.weixin.qq.com/'},
        {   'address': {...},
            'email': 'xiaohouzi@study.com',
            'id': 1008612342,
            'name': '机器学习研究院',
            'website': 'http://mp.weixin.qq.com/'}]



```python
pprint(user[0], width=100) # 控制单行最大宽度
```

    {'address': {'city': 'shenzhen', 'geo': {'lat': '102.54', 'lng': '30.05'}},
     'email': 'yunduojun@study.com',
     'id': 4006118998,
     'name': '数据研究院',
     'website': 'http://mp.weixin.qq.com/'}



```python
pprint(user, sort_dicts=True) # 固定字典字段顺序
```

    [{'address': {'city': 'shenzhen', 'geo': {'lat': '102.54', 'lng': '30.05'}},
      'email': 'yunduojun@study.com',
      'id': 4006118998,
      'name': '数据研究院',
      'website': 'http://mp.weixin.qq.com/'},
     {'address': {'city': 'shenzhen', 'geo': {'lat': '102.54', 'lng': '30.05'}},
      'email': 'xiaohouzi@study.com',
      'id': 1008612342,
      'name': '机器学习研究院',
      'website': 'http://mp.weixin.qq.com/'}]



```python
number_list = [123456789, 10000000000000]
pprint(number_list, underscore_numbers=True) #美化数字输出
```

    [123_456_789, 10_000_000_000_000]


### 美化python对象信息

`rich`提供了`inspect`函数用于展示美化过的python对象信息


```python
from rich import inspect
my_list = ["foo", "bar"]
inspect(my_list, methods=True)
```


<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #000080; text-decoration-color: #000080">╭───────────────────────────────────────── </span><span style="color: #000080; text-decoration-color: #000080; font-weight: bold">&lt;</span><span style="color: #ff00ff; text-decoration-color: #ff00ff; font-weight: bold">class</span><span style="color: #000000; text-decoration-color: #000000"> </span><span style="color: #008000; text-decoration-color: #008000">'list'</span><span style="color: #000080; text-decoration-color: #000080; font-weight: bold">&gt;</span><span style="color: #000080; text-decoration-color: #000080"> ──────────────────────────────────────────╮</span>
<span style="color: #000080; text-decoration-color: #000080">│</span> <span style="color: #008080; text-decoration-color: #008080">Built-in mutable sequence.</span>                                                                        <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span>                                                                                                   <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span> <span style="color: #008000; text-decoration-color: #008000">╭───────────────────────────────────────────────────────────────────────────────────────────────╮</span> <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span> <span style="color: #008000; text-decoration-color: #008000">│</span> <span style="font-weight: bold">[</span><span style="color: #008000; text-decoration-color: #008000">'foo'</span>, <span style="color: #008000; text-decoration-color: #008000">'bar'</span><span style="font-weight: bold">]</span>                                                                                <span style="color: #008000; text-decoration-color: #008000">│</span> <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span> <span style="color: #008000; text-decoration-color: #008000">╰───────────────────────────────────────────────────────────────────────────────────────────────╯</span> <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span>                                                                                                   <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span>  <span style="color: #808000; text-decoration-color: #808000; font-style: italic">append</span> = <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">append</span><span style="font-weight: bold">(</span>object, <span style="color: #800080; text-decoration-color: #800080">/</span><span style="font-weight: bold">)</span>: <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">Append object to the end of the list.</span>                            <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span>   <span style="color: #808000; text-decoration-color: #808000; font-style: italic">clear</span> = <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">clear</span><span style="font-weight: bold">()</span>: <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">Remove all items from list.</span>                                                <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span>    <span style="color: #808000; text-decoration-color: #808000; font-style: italic">copy</span> = <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">copy</span><span style="font-weight: bold">()</span>: <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">Return a shallow copy of the list.</span>                                          <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span>   <span style="color: #808000; text-decoration-color: #808000; font-style: italic">count</span> = <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">count</span><span style="font-weight: bold">(</span>value, <span style="color: #800080; text-decoration-color: #800080">/</span><span style="font-weight: bold">)</span>: <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">Return number of occurrences of value.</span>                             <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span>  <span style="color: #808000; text-decoration-color: #808000; font-style: italic">extend</span> = <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">extend</span><span style="font-weight: bold">(</span>iterable, <span style="color: #800080; text-decoration-color: #800080">/</span><span style="font-weight: bold">)</span>: <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">Extend list by appending elements from the iterable.</span>           <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span>   <span style="color: #808000; text-decoration-color: #808000; font-style: italic">index</span> = <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">index</span><span style="font-weight: bold">(</span>value, <span style="color: #808000; text-decoration-color: #808000">start</span>=<span style="color: #008080; text-decoration-color: #008080; font-weight: bold">0</span>, <span style="color: #808000; text-decoration-color: #808000">stop</span>=<span style="color: #008080; text-decoration-color: #008080; font-weight: bold">9223372036854775807</span>, <span style="color: #800080; text-decoration-color: #800080">/</span><span style="font-weight: bold">)</span>: <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">Return first index of value.</span>    <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span>  <span style="color: #808000; text-decoration-color: #808000; font-style: italic">insert</span> = <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">insert</span><span style="font-weight: bold">(</span>index, object, <span style="color: #800080; text-decoration-color: #800080">/</span><span style="font-weight: bold">)</span>: <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">Insert object before index.</span>                               <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span>     <span style="color: #808000; text-decoration-color: #808000; font-style: italic">pop</span> = <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">pop</span><span style="font-weight: bold">(</span><span style="color: #808000; text-decoration-color: #808000">index</span>=<span style="color: #008080; text-decoration-color: #008080; font-weight: bold">-1</span>, <span style="color: #800080; text-decoration-color: #800080">/</span><span style="font-weight: bold">)</span>: <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">Remove and return item at index </span><span style="color: #7f7f7f; text-decoration-color: #7f7f7f; font-weight: bold">(</span><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">default last</span><span style="color: #7f7f7f; text-decoration-color: #7f7f7f; font-weight: bold">)</span><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">.</span>                   <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span>  <span style="color: #808000; text-decoration-color: #808000; font-style: italic">remove</span> = <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">remove</span><span style="font-weight: bold">(</span>value, <span style="color: #800080; text-decoration-color: #800080">/</span><span style="font-weight: bold">)</span>: <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">Remove first occurrence of value.</span>                                 <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span> <span style="color: #808000; text-decoration-color: #808000; font-style: italic">reverse</span> = <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">reverse</span><span style="font-weight: bold">()</span>: <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">Reverse *IN PLACE*.</span>                                                      <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">│</span>    <span style="color: #808000; text-decoration-color: #808000; font-style: italic">sort</span> = <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">sort</span><span style="font-weight: bold">(</span>*, <span style="color: #808000; text-decoration-color: #808000">key</span>=<span style="color: #800080; text-decoration-color: #800080; font-style: italic">None</span>, <span style="color: #808000; text-decoration-color: #808000">reverse</span>=<span style="color: #ff0000; text-decoration-color: #ff0000; font-style: italic">False</span><span style="font-weight: bold">)</span>: <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">Sort the list in ascending order and return </span><span style="color: #bf7fbf; text-decoration-color: #bf7fbf; font-style: italic">None</span><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">.</span> <span style="color: #000080; text-decoration-color: #000080">│</span>
<span style="color: #000080; text-decoration-color: #000080">╰───────────────────────────────────────────────────────────────────────────────────────────────────╯</span>
</pre>



### 美化输出表格

第三方库[tabulate](https://github.com/astanin/python-tabulate)可以很方便的在命令行中输出优雅的表格,更棒的是它除了支持python原生的数据结构外还支持最常用的数据处理工具pandas和numpy对象.


```python
from tabulate import tabulate
import pandas as pd

table_data = [
    {"Planet":"Sun","R (km)":696000,"mass (x 10^29 kg)":1989100000},
    {"Planet":"Earth","R (km)":6371,"mass (x 10^29 kg)":5973.6},
    {"Planet":"Moon","R (km)":1737,"mass (x 10^29 kg)":73.5},
    {"Planet":"Mars","R (km)":3390,"mass (x 10^29 kg)":641.85}
]
table = pd.DataFrame(table_data)
```


```python
print(tabulate(table,headers=table.columns))
```

        Planet      R (km)    mass (x 10^29 kg)
    --  --------  --------  -------------------
     0  Sun         696000           1.9891e+09
     1  Earth         6371        5973.6
     2  Moon          1737          73.5
     3  Mars          3390         641.85


#### rich中的图表


```python
from rich.table import Column, Table

table = Table(show_header=True, header_style="bold magenta")
table.add_column("Date", style="dim", width=12)
table.add_column("Title")
table.add_column("Production Budget", justify="right")
table.add_column("Box Office", justify="right")
table.add_row(
    "Dec 20, 2019", "Star Wars: The Rise of Skywalker", "$275,000,000", "$375,126,118"
)
table.add_row(
    "May 25, 2018",
    "[red]Solo[/red]: A Star Wars Story",
    "$275,000,000",
    "$393,151,347",
)
table.add_row(
    "Dec 15, 2017",
    "Star Wars Ep. VIII: The Last Jedi",
    "$262,000,000",
    "[bold]$1,332,539,889[/bold]",
)
rprint(table)
```


<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">┏━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━┓
┃<span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Date         </span>┃<span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Title                             </span>┃<span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Production Budget </span>┃<span style="color: #800080; text-decoration-color: #800080; font-weight: bold">     Box Office </span>┃
┡━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━┩
│<span style="color: #7f7f7f; text-decoration-color: #7f7f7f"> Dec 20, 2019 </span>│ Star Wars: The Rise of Skywalker  │      $275,000,000 │   $375,126,118 │
│<span style="color: #7f7f7f; text-decoration-color: #7f7f7f"> May 25, 2018 </span>│ <span style="color: #800000; text-decoration-color: #800000">Solo</span>: A Star Wars Story           │      $275,000,000 │   $393,151,347 │
│<span style="color: #7f7f7f; text-decoration-color: #7f7f7f"> Dec 15, 2017 </span>│ Star Wars Ep. VIII: The Last Jedi │      $262,000,000 │ <span style="font-weight: bold">$1,332,539,889</span> │
└──────────────┴───────────────────────────────────┴───────────────────┴────────────────┘
</pre>



### 美化输出图表

没错,第三方库[bashplotlib](https://github.com/glamp/bashplotlib)可以帮我们在命令行中输出图表!不过目前只支持直方图(`plot_hist`)和点图(`plot_scatter`).


```python
import numpy as np
from bashplotlib.histogram import plot_hist
```


```python
rand_nums = np.random.normal(size=1000, loc=0, scale=1)
plot_hist(rand_nums, bincount=100)
```

    
     40| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     38| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     36| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     34| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     32| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     30| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     28| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     26| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     24| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     22| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     19| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     17| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     15| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     13| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
     11| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
      9| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
      7| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39m [39m[39m [39m[39mo[39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
      5| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
      3| [39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39mo[39m[39m [39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39m [39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m
      1| [39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39mo[39m[39mo[39m[39m [39m[39mo[39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39m [39m[39mo[39m
        ----------------------------------------------------------------------------------------------------


### 树状图

树状图最典型的就是文件结构描述,rich可以通过`Tree`类来实现


```python
from rich.tree import Tree
from rich.filesize import decimal
from rich.markup import escape
from rich.text import Text
from pathlib import Path

def walk_directory(directory: Path, tree: Tree) -> None:
    """Recursively build a Tree with directory contents."""
    # Sort dirs first then by filename
    paths = sorted(Path(directory).iterdir(),
        key=lambda path: (path.is_file(), path.name.lower()),
    )
    for path in paths:
        # Remove hidden files
        if path.name.startswith("."):
            continue
        if path.is_dir():
            style = "dim" if path.name.startswith("__") else ""
            branch = tree.add(
                f"[bold magenta]:open_file_folder: [link file://{path}]{escape(path.name)}",
                style=style,
                guide_style=style,
            )
            walk_directory(path, branch)
        else:
            text_filename = Text(path.name, "green")
            text_filename.highlight_regex(r"\..*$", "bold red")
            text_filename.stylize(f"link file://{path}")
            file_size = path.stat().st_size
            text_filename.append(f" ({decimal(file_size)})", "blue")
            icon = "🐍 " if path.suffix == ".py" else "📄 "
            tree.add(Text(icon) + text_filename)
tree = Tree(
    f":open_file_folder: [link file://src",
    guide_style="bold bright_blue",
)
walk_directory(Path("src"), tree)
rprint(tree)
```


<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">📂 [link file://src
<span style="color: #0000ff; text-decoration-color: #0000ff">┣━━ </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">📂 </span><a href="file://src/cmd" target="_blank"><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">cmd</span></a>
<span style="color: #0000ff; text-decoration-color: #0000ff">┃   ┣━━ </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">📂 </span><a href="file://src/cmd/doc" target="_blank"><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">doc</span></a>
<span style="color: #0000ff; text-decoration-color: #0000ff">┃   ┃   ┗━━ </span>🐍 <a href="file://src/cmd/doc/sqrt_doc.py" target="_blank"><span style="color: #008000; text-decoration-color: #008000">sqrt_doc</span></a><a href="file://src/cmd/doc/sqrt_doc.py" target="_blank"><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">.py</span></a><span style="color: #000080; text-decoration-color: #000080"> (847 bytes)</span>
<span style="color: #0000ff; text-decoration-color: #0000ff">┃   ┗━━ </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">📂 </span><a href="file://src/cmd/std" target="_blank"><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">std</span></a>
<span style="color: #0000ff; text-decoration-color: #0000ff">┃       ┣━━ </span>🐍 <a href="file://src/cmd/std/setup.py" target="_blank"><span style="color: #008000; text-decoration-color: #008000">setup</span></a><a href="file://src/cmd/std/setup.py" target="_blank"><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">.py</span></a><span style="color: #000080; text-decoration-color: #000080"> (279 bytes)</span>
<span style="color: #0000ff; text-decoration-color: #0000ff">┃       ┣━━ </span>🐍 <a href="file://src/cmd/std/sqrt_std.py" target="_blank"><span style="color: #008000; text-decoration-color: #008000">sqrt_std</span></a><a href="file://src/cmd/std/sqrt_std.py" target="_blank"><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">.py</span></a><span style="color: #000080; text-decoration-color: #000080"> (592 bytes)</span>
<span style="color: #0000ff; text-decoration-color: #0000ff">┃       ┗━━ </span>🐍 <a href="file://src/cmd/std/sqrt_std_gui.py" target="_blank"><span style="color: #008000; text-decoration-color: #008000">sqrt_std_gui</span></a><a href="file://src/cmd/std/sqrt_std_gui.py" target="_blank"><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">.py</span></a><span style="color: #000080; text-decoration-color: #000080"> (631 bytes)</span>
<span style="color: #0000ff; text-decoration-color: #0000ff">┣━━ </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">📂 </span><a href="file://src/repl" target="_blank"><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">repl</span></a>
<span style="color: #0000ff; text-decoration-color: #0000ff">┃   ┣━━ </span>🐍 <a href="file://src/repl/sqlshell.py" target="_blank"><span style="color: #008000; text-decoration-color: #008000">sqlshell</span></a><a href="file://src/repl/sqlshell.py" target="_blank"><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">.py</span></a><span style="color: #000080; text-decoration-color: #000080"> (3.0 kB)</span>
<span style="color: #0000ff; text-decoration-color: #0000ff">┃   ┗━━ </span>🐍 <a href="file://src/repl/turtleshell.py" target="_blank"><span style="color: #008000; text-decoration-color: #008000">turtleshell</span></a><a href="file://src/repl/turtleshell.py" target="_blank"><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">.py</span></a><span style="color: #000080; text-decoration-color: #000080"> (2.6 kB)</span>
<span style="color: #0000ff; text-decoration-color: #0000ff">┗━━ </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">📂 </span><a href="file://src/stdio" target="_blank"><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">stdio</span></a>
<span style="color: #0000ff; text-decoration-color: #0000ff">    ┣━━ </span>🐍 <a href="file://src/stdio/helloworld.py" target="_blank"><span style="color: #008000; text-decoration-color: #008000">helloworld</span></a><a href="file://src/stdio/helloworld.py" target="_blank"><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">.py</span></a><span style="color: #000080; text-decoration-color: #000080"> (119 bytes)</span>
<span style="color: #0000ff; text-decoration-color: #0000ff">    ┣━━ </span>🐍 <a href="file://src/stdio/helloworld_stdin.py" target="_blank"><span style="color: #008000; text-decoration-color: #008000">helloworld_stdin</span></a><a href="file://src/stdio/helloworld_stdin.py" target="_blank"><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">.py</span></a><span style="color: #000080; text-decoration-color: #000080"> (284 bytes)</span>
<span style="color: #0000ff; text-decoration-color: #0000ff">    ┣━━ </span>🐍 <a href="file://src/stdio/helloworld_stdout.py" target="_blank"><span style="color: #008000; text-decoration-color: #008000">helloworld_stdout</span></a><a href="file://src/stdio/helloworld_stdout.py" target="_blank"><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">.py</span></a><span style="color: #000080; text-decoration-color: #000080"> (140 bytes)</span>
<span style="color: #0000ff; text-decoration-color: #0000ff">    ┗━━ </span>🐍 <a href="file://src/stdio/imginbash.py" target="_blank"><span style="color: #008000; text-decoration-color: #008000">imginbash</span></a><a href="file://src/stdio/imginbash.py" target="_blank"><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">.py</span></a><span style="color: #000080; text-decoration-color: #000080"> (803 bytes)</span>
</pre>



### 进度条

[tqdm](https://pypi.python.org/pypi/tqdm)是一个进度条工具,除了可以给命令行工具增加进度条看出进度外,还可以用于`jupyter-notebook`

tqdm模块的tqdm类是这个包的核心,所有功能都是在它上面衍生而来

tqdm类可以包装可迭代对象,它的实例化参数有:


+ `desc`: str, optional, 放在bar前面的描述字符串
+ `total` : int, optional, 显示多长
+ `leave`: bool, optional, 结束时时保留进度条的所有痕迹
+ `file`: io.TextIOWrapper or io.StringIO, optional, 输出到文件
+ `ncols`: int, optional, 自定义宽度
+ `mininterval`: float, optional, 更新最短时间
+ `maxinterval`: float, optional, 更新最大时间
+ `miniters`: int, optional, 每次更新最小值
+ `ascii`: bool, optional, 使用ascii碼显示
+ `disable`: bool, optional, 是否禁用整个progressbar  
+ `unit`: str, optional, 显示的更新单位
+ `unit_scale`: bool, optional, 根据单位换算进度
+ `dynamic_ncols`: bool, optional, 可以不断梗概ncols的环境
+ `smoothing`: float, optional, 用于速度估计的指数移动平均平滑因子(在GUI模式中忽略).范围从0(平均速度)到1(当前/瞬时速度),默认值:0.3
+ `bar_format`: str, optional, 指定自定义栏字符串格式. 可能会影响性能
+ `initial`: int, optional, 初始计数器值.重新启动进度条时有用,默认值:0
+ `position`: int, optional, 指定打印此条的线偏移(从0开始)如果未指定则为自动.用于一次管理多个进度条

#### 基础的循环


```python
from tqdm import tqdm
for i in tqdm(range(int(9e6)),desc="test:"):
    pass
```

    test:: 100%|█████████████████████████████████████████████████████████████████████████████████| 9000000/9000000 [00:01<00:00, 4909777.51it/s]



```python
for i in tqdm(range(int(9e6)),desc="test",dynamic_ncols=True):
    pass
```

    test: 100%|██████████████████████████████████████████████████████████████████████████████████| 9000000/9000000 [00:01<00:00, 4954143.57it/s]


#### 使用with语句手工更新


```python
with tqdm(total=100) as bar:
    for i in range(10):
        bar.update(10)
```

    100%|████████████████████████████████████████████████████████████████████████████████████████████████| 100/100 [00:00<00:00, 1100867.19it/s]


#### rich中的进度条


```python
from rich.progress import track
import time

def do_step(x):
    time.sleep(0.01)


for step in track(range(100)):
    do_step(step)
```


    Output()



<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>




<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
</pre>



除了精度条,rich也提供了状态动画,这对那些不关心具体进度,只关心步骤是否完成的展示需求就比较有用了


```python
from time import sleep
from rich.console import Console

console = Console()
tasks = [f"task {n}" for n in range(1, 11)]

with console.status("[bold green]Working on tasks...") as status:
    while tasks:
        task = tasks.pop(0)
        sleep(1)
        console.log(f"{task} complete")
```


    Output()



<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">[10:34:57] </span>task <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span> complete                                                                         <a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">3174793479.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py#11" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">11</span></a>
</pre>




<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">[10:34:58] </span>task <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">2</span> complete                                                                         <a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">3174793479.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py#11" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">11</span></a>
</pre>




<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">[10:34:59] </span>task <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">3</span> complete                                                                         <a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">3174793479.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py#11" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">11</span></a>
</pre>




<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">[10:35:00] </span>task <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">4</span> complete                                                                         <a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">3174793479.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py#11" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">11</span></a>
</pre>




<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">[10:35:01] </span>task <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">5</span> complete                                                                         <a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">3174793479.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py#11" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">11</span></a>
</pre>




<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">[10:35:02] </span>task <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">6</span> complete                                                                         <a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">3174793479.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py#11" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">11</span></a>
</pre>




<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">[10:35:03] </span>task <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">7</span> complete                                                                         <a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">3174793479.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py#11" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">11</span></a>
</pre>




<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">[10:35:04] </span>task <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">8</span> complete                                                                         <a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">3174793479.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py#11" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">11</span></a>
</pre>




<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">[10:35:05] </span>task <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">9</span> complete                                                                         <a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">3174793479.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py#11" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">11</span></a>
</pre>




<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">[10:35:06] </span>task <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">10</span> complete                                                                        <a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">3174793479.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file:///var/folders/j_/p0q1k_mj4cs0dqn0sqnshsrr0000gn/T/ipykernel_832/3174793479.py#11" target="_blank"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">11</span></a>
</pre>




<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>



### emoji支持

[emoji](https://github.com/carpedm20/emoji)让python可以在命令行中输出表情.emoji表情可以在[这个网页查询到](https://www.webfx.com/tools/emoji-cheat-sheet/)


```python
import emoji
```


```python
print(emoji.emojize('Python is 👍'))
```

    Python is 👍



```python
print(emoji.emojize('Python is :thumbs_up:'))
```

    Python is 👍


#### rich中的emoji

rich的print函数可以自动将`:xxxx:`翻译为emoji表情


```python
rprint(":smiley: :vampire: :pile_of_poo: :thumbs_up: :raccoon:")
```


<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">😃 🧛 💩 👍 🦝
</pre>



### 带颜色的输出

[colorama](https://github.com/tartley/colorama)搭配[termcolor](https://github.com/termcolor/termcolor)让python可以在命令行中输出的文本可以带颜色.


```python
from termcolor import colored
from colorama import init
init()
```


```python
print(colored('Hello, World!', 'green', 'on_red'))
```

    Hello, World!


####  rich中使用颜色和样式

在最初的例子中就已经演示了颜色,rich中通过`[颜色]文本[/颜色]`的形式标注文本的颜色情况([BBCode方式](https://en.wikipedia.org/wiki/BBCode)).

支持颜色可以在[这张表](https://rich.readthedocs.io/en/latest/appendix/colors.html#appendix-colors)中查找到,颜色名或rgb都可以使用


除了颜色外,其他样式可以使用这种方式,比如

+ `[b]`加粗
+ `[i]`斜体
+ `[u]`下划线
+ `[s]`中划线



```python
rprint("Where there is a [bold cyan]Will[/bold cyan] there [u]is[/u] a [i]way[/i].")
```


<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">Where there is a <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">Will</span> there <span style="text-decoration: underline">is</span> a <span style="font-style: italic">way</span>.
</pre>



### 渲染markdown

rich支持直接渲染markdown到命令行


```python
from rich.markdown import Markdown

with open("README.md","r") as f:
    m = Markdown(f.read())
    
rprint(m)
```


<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                   <span style="font-weight: bold">命令行交互</span>                                                    ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

我们肯定希望机器的输入和输出都是人类可以轻易理解的东西,但说起来简单做起来难,人和人沟通都时常有无法相互理解的情况更 
况人和机器.在gui诞生之前人机交互的平台就是命令行.使用命令行本身就是一件有门槛的事情,熟练各种命令的人可以行云流水,  
但不熟练的人则会一脸懵逼,毕竟你只能通过键盘打字和程序沟通,这看起来很极客但其实还是很枯燥的.                        

Python作为一个初始设定就是系统脚本的编程语言,在命令行交互方面优缺点都非常明显:                                     

优点:                                                                                                              

<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> • </span>语法灵活,第三方工具多,可以快速实现很多东西.                                                                     
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> • </span>可以根据需要非常轻易的修改脚本以更新实现                                                                        

缺点:                                                                                                              

<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> • </span>依赖解释器,再小的功能也要带一整套python环境以及一堆依赖                                                         
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> • </span>复杂功能由于依赖树过于复杂可能会很难移植                                                                        

因此python的命令行交互通常使用上也会扬长避短:                                                                      

<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> • </span>用于python程序的启动                                                                                            
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> • </span>用于有比较复杂功能的命令行工具中                                                                                
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> • </span>用于快速构造或者在需求不明确的时候使用                                                                          

在这部分我们会介绍如下几个方面:                                                                                    

<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> 1 </span>标准输入输出                                                                                                    
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> 2 </span>使用python如何构造一个命令行工具                                                                                
<span style="color: #808000; text-decoration-color: #808000; font-weight: bold"> 3 </span>使用python如何构造一个repl                                                                                      
</pre>



### 语法高亮

rich也支持语法高亮,内部使用的是`pygments`,支持的语言可以在[这里找到](https://pygments.org/languages/)这对要展示代码的情况很有用


```python
from rich.syntax import Syntax

my_code = '''
def iter_first_last(values: Iterable[T]) -> Iterable[Tuple[bool, bool, T]]:
    """Iterate and generate a tuple with a flag for first and last value."""
    iter_values = iter(values)
    try:
        previous_value = next(iter_values)
    except StopIteration:
        return
    first = True
    for value in iter_values:
        yield first, False, previous_value
        first = False
        previous_value = value
    yield first, True, previous_value
'''
syntax = Syntax(my_code, "python", theme="monokai", line_numbers=True)

rprint(syntax)
```


<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822"> 1 </span><span style="background-color: #272822">                                                                                                              </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822"> 2 </span><span style="color: #66d9ef; text-decoration-color: #66d9ef; background-color: #272822">def</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822"> </span><span style="color: #a6e22e; text-decoration-color: #a6e22e; background-color: #272822">iter_first_last</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">(values: Iterable[T]) </span><span style="color: #f92672; text-decoration-color: #f92672; background-color: #272822">-&gt;</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822"> Iterable[Tuple[bool, bool, T]]:</span><span style="background-color: #272822">                                   </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822"> 3 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">    </span><span style="color: #e6db74; text-decoration-color: #e6db74; background-color: #272822">"""Iterate and generate a tuple with a flag for first and last value."""</span><span style="background-color: #272822">                                  </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822"> 4 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">    iter_values </span><span style="color: #f92672; text-decoration-color: #f92672; background-color: #272822">=</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822"> iter(values)</span><span style="background-color: #272822">                                                                                </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822"> 5 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">    </span><span style="color: #66d9ef; text-decoration-color: #66d9ef; background-color: #272822">try</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">:</span><span style="background-color: #272822">                                                                                                      </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822"> 6 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">        previous_value </span><span style="color: #f92672; text-decoration-color: #f92672; background-color: #272822">=</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822"> next(iter_values)</span><span style="background-color: #272822">                                                                    </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822"> 7 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">    </span><span style="color: #66d9ef; text-decoration-color: #66d9ef; background-color: #272822">except</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822"> </span><span style="color: #a6e22e; text-decoration-color: #a6e22e; background-color: #272822">StopIteration</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">:</span><span style="background-color: #272822">                                                                                     </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822"> 8 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">        </span><span style="color: #66d9ef; text-decoration-color: #66d9ef; background-color: #272822">return</span><span style="background-color: #272822">                                                                                                </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822"> 9 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">    first </span><span style="color: #f92672; text-decoration-color: #f92672; background-color: #272822">=</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822"> </span><span style="color: #66d9ef; text-decoration-color: #66d9ef; background-color: #272822">True</span><span style="background-color: #272822">                                                                                              </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822">10 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">    </span><span style="color: #66d9ef; text-decoration-color: #66d9ef; background-color: #272822">for</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822"> value </span><span style="color: #f92672; text-decoration-color: #f92672; background-color: #272822">in</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822"> iter_values:</span><span style="background-color: #272822">                                                                                 </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822">11 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">        </span><span style="color: #66d9ef; text-decoration-color: #66d9ef; background-color: #272822">yield</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822"> first, </span><span style="color: #66d9ef; text-decoration-color: #66d9ef; background-color: #272822">False</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">, previous_value</span><span style="background-color: #272822">                                                                    </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822">12 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">        first </span><span style="color: #f92672; text-decoration-color: #f92672; background-color: #272822">=</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822"> </span><span style="color: #66d9ef; text-decoration-color: #66d9ef; background-color: #272822">False</span><span style="background-color: #272822">                                                                                         </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822">13 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">        previous_value </span><span style="color: #f92672; text-decoration-color: #f92672; background-color: #272822">=</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822"> value</span><span style="background-color: #272822">                                                                                </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822">14 </span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">    </span><span style="color: #66d9ef; text-decoration-color: #66d9ef; background-color: #272822">yield</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822"> first, </span><span style="color: #66d9ef; text-decoration-color: #66d9ef; background-color: #272822">True</span><span style="color: #f8f8f2; text-decoration-color: #f8f8f2; background-color: #272822">, previous_value</span><span style="background-color: #272822">                                                                         </span>
<span style="color: #e3e3dd; text-decoration-color: #e3e3dd; background-color: #272822; font-weight: bold">  </span><span style="color: #656660; text-decoration-color: #656660; background-color: #272822">15 </span><span style="background-color: #272822">                                                                                                              </span>
</pre>



### 输出艺术字

[art](https://github.com/sepandhaghighi/art)可以让python输出艺术字,颜文字(可以在[这里查看](http://1lineart.kulaone.com/#/))等一些稀奇古怪的东西,也可以增加标准输出结果的趣味性.

不过很遗憾这个的艺术字仅限英文.


```python
from art import text2art,art
```


```python
# 输出艺术字
print(text2art("Python"))
```

     ____          _    _                   
    |  _ \  _   _ | |_ | |__    ___   _ __  
    | |_) || | | || __|| '_ \  / _ \ | '_ \ 
    |  __/ | |_| || |_ | | | || (_) || | | |
    |_|     \__, | \__||_| |_| \___/ |_| |_|
            |___/                           
    



```python
# 输出颜文字
print(art("happy"))
```

     ۜ\(סּںסּَ` )/ۜ 


### 输出图片的命令行形式

目前并没有哪个库支持将图片转成命令行图标形式,但使用PIL


```python
%%writefile src/stdio/imginbash.py
import PIL.Image
 
img_flag = True
path = input("Enter the path to the image field : \n")
 
try:
    img = PIL.Image.open(path)
    img_flag = True
except:
    print(path, "Unable to find image ");

width, height = img.size
aspect_ratio = height/width
new_width = 120
new_height = aspect_ratio * new_width * 0.55
img = img.resize((new_width, int(new_height)))
 
img = img.convert('L')
 
chars = ["@", "J", "D", "%", "*", "P", "+", "Y", "$", ",", "."]
 
pixels = img.getdata()
new_pixels = [chars[pixel//25] for pixel in pixels]
new_pixels = ''.join(new_pixels)
new_pixels_count = len(new_pixels)
ascii_image = [new_pixels[index:index + new_width] for index in range(0, new_pixels_count, new_width)]
ascii_image = "\n".join(ascii_image)
 
with open("ascii_image.txt", "w") as f:
    f.write(ascii_image)
```

    Writing src/stdio/imginbash.py



